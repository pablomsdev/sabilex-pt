jQuery(document).ready(function(a){/***** Colour picker *****/
a(".colorpicker").hide(),a(".colorpicker").each(function(){a(this).farbtastic(a(this).closest(".color-picker").find(".color"))}),a(".color").click(function(){a(this).closest(".color-picker").find(".colorpicker").fadeIn()}),a(document).mousedown(function(){a(".colorpicker").each(function(){var b=a(this).css("display");"block"==b&&a(this).fadeOut()})});/***** Uploading images *****/
var b;jQuery.fn.uploadMediaFile=function(a,c){var d=a.attr("id"),e=d.replace("_button",""),f=d.replace("_button","_preview");
// If the media frame already exists, reopen it.
// If the media frame already exists, reopen it.
// Create the media frame.
// When an image is selected, run a callback.
// Finally, open the modal
return b?void b.open():(b=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1}),b.on("select",function(){attachment=b.state().get("selection").first().toJSON(),jQuery("#"+e).val(attachment.id),c&&jQuery("#"+f).attr("src",attachment.sizes.thumbnail.url),b=!1}),void b.open())},jQuery(".image_upload_button").click(function(){jQuery.fn.uploadMediaFile(jQuery(this),!0)}),jQuery(".image_delete_button").click(function(){return jQuery(this).closest("td").find(".image_data_field").val(""),jQuery(this).closest("td").find(".image_preview").remove(),!1})});